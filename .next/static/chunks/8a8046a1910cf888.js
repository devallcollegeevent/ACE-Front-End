(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,50233,e=>{"use strict";let a=e.i(81949).default.create({baseURL:"http://3.6.238.72:5000/api"});console.log("API BASE URL =>","http://3.6.238.72:5000/api"),e.s(["default",0,a])},48779,e=>{"use strict";e.i(53596);var a=e.i(50233),l=e.i(76004),i=e.i(8720);e.s(["forgotApi",0,e=>(0,i.handleApi)(a.default.post(l.API_ENDPOINTS.AUTH.FORGOT_PASSWORD,e)),"googleAuthLoginApi",0,e=>(0,i.handleApi)(a.default.post(l.API_ENDPOINTS.AUTH.GOOGLE_LOGIN,e)),"loginApi",0,e=>(0,i.handleApi)(a.default.post(l.API_ENDPOINTS.AUTH.LOGIN,e)),"resendOtpApi",0,e=>(0,i.handleApi)(a.default.post(l.API_ENDPOINTS.AUTH.RESEND_OTP,e)),"resetPasswordApi",0,e=>(0,i.handleApi)(a.default.post(l.API_ENDPOINTS.AUTH.RESET_PASSWORD,e)),"signupApi",0,e=>(0,i.handleApi)(a.default.post(l.API_ENDPOINTS.AUTH.SIGNUP,e)),"verifyEmailApi",0,e=>(0,i.handleApi)(a.default.get(`${l.API_ENDPOINTS.AUTH.ORG_VERIFY}?token=${encodeURIComponent(e)}`)),"verifyOtpApi",0,e=>(0,i.handleApi)(a.default.post(l.API_ENDPOINTS.AUTH.VERIFY_OTP,e))])},47110,e=>{e.v({btnRow:"Profile-module__rfW_xW__btnRow",cancelBtn:"Profile-module__rfW_xW__cancelBtn",changePassword:"Profile-module__rfW_xW__changePassword",editBox:"Profile-module__rfW_xW__editBox",editIcon:"Profile-module__rfW_xW__editIcon",eyeIcon:"Profile-module__rfW_xW__eyeIcon",inputWrapper:"Profile-module__rfW_xW__inputWrapper",left:"Profile-module__rfW_xW__left",otpBox:"Profile-module__rfW_xW__otpBox",otpInputs:"Profile-module__rfW_xW__otpInputs",passwordBox:"Profile-module__rfW_xW__passwordBox",profileWrapper:"Profile-module__rfW_xW__profileWrapper",resend:"Profile-module__rfW_xW__resend",saveBtn:"Profile-module__rfW_xW__saveBtn",successBox:"Profile-module__rfW_xW__successBox",uploadBox:"Profile-module__rfW_xW__uploadBox",viewBox:"Profile-module__rfW_xW__viewBox"})},70532,e=>{"use strict";var a=e.i(43476),l=e.i(71645),i=e.i(47110),t=e.i(5766),s=e.i(94102),d=e.i(59390),n=e.i(48779),r=e.i(44127),o=e.i(43560),u=e.i(2358);let c=e=>e?.type==="org"?{getProfile:s.getOrganizationProfileApi,updateProfile:s.updateOrganizationProfileApi,nameKey:"organizationName",emailKey:"domainEmail"}:{getProfile:d.getUserProfileApi,updateProfile:d.updateUserProfileApi,nameKey:"name",emailKey:"email"};function p(){let[e,s]=(0,l.useState)("view"),[d,p]=(0,l.useState)(null),[f,_]=(0,l.useState)(!0),{setLoading:m}=(0,u.useLoading)(),[x,P]=(0,l.useState)({name:"",email:"",image:null}),[h,g]=(0,l.useState)(""),[A,W]=(0,l.useState)(""),[N,j]=(0,l.useState)(""),[v,I]=(0,l.useState)(!1),[O,S]=(0,l.useState)(!1),w=(0,l.useRef)(null);(0,l.useEffect)(()=>{!async function(){m(!0);try{let e=(0,r.getUserData)();if(!e?.identity)return;let a=c(e),l=await a.getProfile(e.identity);l?.status&&(p(l.data),P({name:l.data[a.nameKey]||"",email:l.data[a.emailKey]||"",image:null}))}catch(e){t.default.error("Failed to load profile")}finally{_(!1),m(!1)}}()},[m]);let y=async()=>{m(!0);try{let e=(0,r.getUserData)(),a=c(e),l=new FormData;l.append(a.nameKey,x.name),l.append(a.emailKey,x.email),x.image&&l.append("image",x.image);let i=await a.updateProfile(e.identity,l);i?.status?(p(i.data),t.default.success("Profile updated"),s("view")):t.default.error("Update failed")}catch{t.default.error("Update failed")}finally{m(!1)}},C=async()=>{m(!0),await (0,n.forgotApi)({email:x.email}),t.default.success("OTP sent"),s("otp"),m(!1)},T=async()=>{m(!0),await (0,n.verifyOtpApi)({email:x.email,otp:h}),t.default.success("OTP verified"),s("password"),m(!1)},E=async()=>{if(A!==N)return t.default.error("Passwords not matching");await (0,n.resetPasswordApi)({email:x.email,password:A}),t.default.success("Password updated"),s("success"),m(!1)};return f?(0,a.jsx)("p",{style:{padding:20},children:"Loading..."}):d?(0,a.jsxs)("div",{className:i.default.wrapper,children:["view"===e&&(0,a.jsxs)("div",{className:i.default.viewBox,children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{children:"Full Name"}),(0,a.jsx)("p",{children:x.name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{children:"Email"}),(0,a.jsx)("p",{children:x.email})]}),(0,a.jsx)("img",{src:"/images/Pen.png",className:i.default.editIcon,onClick:()=>s("edit")})]}),"edit"===e&&(0,a.jsxs)("div",{className:i.default.editBox,children:[(0,a.jsxs)("div",{className:i.default.left,children:[(0,a.jsx)("label",{children:"Full Name"}),(0,a.jsx)("input",{value:x.name,onChange:e=>P({...x,name:e.target.value})}),(0,a.jsx)("label",{children:"Email"}),(0,a.jsx)("input",{value:x.email,onChange:e=>P({...x,email:e.target.value})}),(0,a.jsx)("span",{className:i.default.changePass,onClick:C,children:"Change Password"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:i.default.uploadBox,onClick:()=>w.current.click(),children:(0,a.jsx)("p",{children:x.image?x.image.name:"Upload profile picture"})}),(0,a.jsx)("input",{ref:w,type:"file",hidden:!0,accept:"image/*",onChange:e=>P({...x,image:e.target.files[0]})}),(0,a.jsxs)("div",{className:i.default.btnRow,children:[(0,a.jsx)("button",{onClick:()=>s("view"),children:"Cancel"}),(0,a.jsx)("button",{onClick:y,children:"Save"})]})]})]}),"otp"===e&&(0,a.jsxs)("div",{className:i.default.centerBox,children:[(0,a.jsx)("h3",{children:"Enter OTP"}),(0,a.jsx)("input",{maxLength:4,value:h,onChange:e=>g(e.target.value)}),(0,a.jsxs)("div",{className:i.default.btnRow,children:[(0,a.jsx)("button",{onClick:()=>s("edit"),children:"Cancel"}),(0,a.jsx)("button",{onClick:T,children:"Continue"})]})]}),"password"===e&&(0,a.jsxs)("div",{className:i.default.centerBox,children:[(0,a.jsxs)("div",{className:i.default.passWrap,children:[(0,a.jsx)("input",{type:v?"text":"password",placeholder:"New password",onChange:e=>W(e.target.value)}),(0,a.jsx)("span",{onClick:()=>I(!v),children:v?o.PASSWORDVIEWICON:o.PASSWORDHIDEICON})]}),(0,a.jsxs)("div",{className:i.default.passWrap,children:[(0,a.jsx)("input",{type:O?"text":"password",placeholder:"Confirm password",onChange:e=>j(e.target.value)}),(0,a.jsx)("span",{onClick:()=>S(!O),children:O?o.PASSWORDVIEWICON:o.PASSWORDHIDEICON})]}),(0,a.jsxs)("div",{className:i.default.btnRow,children:[(0,a.jsx)("button",{onClick:()=>s("edit"),children:"Cancel"}),(0,a.jsx)("button",{onClick:E,children:"Save"})]})]}),"success"===e&&(0,a.jsx)("div",{className:i.default.success,children:"Password Successfully Changed!!"})]}):(0,a.jsx)("p",{style:{padding:20},children:"No profile found"})}e.s(["default",()=>p])}]);