(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,50233,e=>{"use strict";let a=e.i(81949).default.create({baseURL:"http://3.6.238.72:5000/api"});console.log("API BASE URL =>","http://3.6.238.72:5000/api"),e.s(["default",0,a])},48779,e=>{"use strict";e.i(53596);var a=e.i(50233),l=e.i(76004),i=e.i(8720);e.s(["forgotApi",0,e=>(0,i.handleApi)(a.default.post(l.API_ENDPOINTS.AUTH.FORGOT_PASSWORD,e)),"loginApi",0,e=>(0,i.handleApi)(a.default.post(l.API_ENDPOINTS.AUTH.LOGIN,e)),"resendOtpApi",0,e=>(0,i.handleApi)(a.default.post(l.API_ENDPOINTS.AUTH.RESEND_OTP,e)),"resetPasswordApi",0,e=>(0,i.handleApi)(a.default.post(l.API_ENDPOINTS.AUTH.RESET_PASSWORD,e)),"signupApi",0,e=>(0,i.handleApi)(a.default.post(l.API_ENDPOINTS.AUTH.SIGNUP,e)),"verifyEmailApi",0,e=>(0,i.handleApi)(a.default.get(`${l.API_ENDPOINTS.AUTH.ORG_VERIFY}?token=${encodeURIComponent(e)}`)),"verifyOtpApi",0,e=>(0,i.handleApi)(a.default.post(l.API_ENDPOINTS.AUTH.VERIFY_OTP,e))])},47110,e=>{e.v({btnRow:"Profile-module__rfW_xW__btnRow",cancelBtn:"Profile-module__rfW_xW__cancelBtn",changePassword:"Profile-module__rfW_xW__changePassword",editBox:"Profile-module__rfW_xW__editBox",editIcon:"Profile-module__rfW_xW__editIcon",eyeIcon:"Profile-module__rfW_xW__eyeIcon",inputWrapper:"Profile-module__rfW_xW__inputWrapper",left:"Profile-module__rfW_xW__left",otpBox:"Profile-module__rfW_xW__otpBox",otpInputs:"Profile-module__rfW_xW__otpInputs",passwordBox:"Profile-module__rfW_xW__passwordBox",profileWrapper:"Profile-module__rfW_xW__profileWrapper",resend:"Profile-module__rfW_xW__resend",saveBtn:"Profile-module__rfW_xW__saveBtn",successBox:"Profile-module__rfW_xW__successBox",uploadBox:"Profile-module__rfW_xW__uploadBox",viewBox:"Profile-module__rfW_xW__viewBox"})},70532,e=>{"use strict";var a=e.i(43476),l=e.i(71645),i=e.i(47110),t=e.i(5766),s=e.i(94102),d=e.i(59390),n=e.i(48779),r=e.i(44127),o=e.i(43560);let c=e=>e?.type==="org"?{getProfile:s.getOrganizationProfileApi,updateProfile:s.updateOrganizationProfileApi,nameKey:"organizationName",emailKey:"domainEmail"}:{getProfile:d.getUserProfileApi,updateProfile:d.updateUserProfileApi,nameKey:"name",emailKey:"email"};function u(){let[e,s]=(0,l.useState)("view"),[d,u]=(0,l.useState)(null),[p,f]=(0,l.useState)(!0),[_,m]=(0,l.useState)({name:"",email:"",image:null}),[x,P]=(0,l.useState)(""),[h,g]=(0,l.useState)(""),[W,A]=(0,l.useState)(""),[j,v]=(0,l.useState)(!1),[N,w]=(0,l.useState)(!1),S=(0,l.useRef)(null);(0,l.useEffect)(()=>{!async function(){try{let e=(0,r.getUserData)();if(!e?.identity)return;let a=c(e),l=await a.getProfile(e.identity);l?.status&&(u(l.data),m({name:l.data[a.nameKey]||"",email:l.data[a.emailKey]||"",image:null}))}catch(e){t.default.error("Failed to load profile")}finally{f(!1)}}()},[]);let I=async()=>{try{let e=(0,r.getUserData)(),a=c(e),l=new FormData;l.append(a.nameKey,_.name),l.append(a.emailKey,_.email),_.image&&l.append("image",_.image);let i=await a.updateProfile(e.identity,l);i?.status?(u(i.data),t.default.success("Profile updated"),s("view")):t.default.error("Update failed")}catch{t.default.error("Update failed")}},O=async()=>{await (0,n.forgotApi)({email:_.email}),t.default.success("OTP sent"),s("otp")},y=async()=>{await (0,n.verifyOtpApi)({email:_.email,otp:x}),t.default.success("OTP verified"),s("password")},C=async()=>{if(h!==W)return t.default.error("Passwords not matching");await (0,n.resetPasswordApi)({email:_.email,password:h}),t.default.success("Password updated"),s("success")};return p?(0,a.jsx)("p",{style:{padding:20},children:"Loading..."}):d?(0,a.jsxs)("div",{className:i.default.wrapper,children:["view"===e&&(0,a.jsxs)("div",{className:i.default.viewBox,children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{children:"Full Name"}),(0,a.jsx)("p",{children:_.name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{children:"Email"}),(0,a.jsx)("p",{children:_.email})]}),(0,a.jsx)("img",{src:"/images/Pen.png",className:i.default.editIcon,onClick:()=>s("edit")})]}),"edit"===e&&(0,a.jsxs)("div",{className:i.default.editBox,children:[(0,a.jsxs)("div",{className:i.default.left,children:[(0,a.jsx)("label",{children:"Full Name"}),(0,a.jsx)("input",{value:_.name,onChange:e=>m({..._,name:e.target.value})}),(0,a.jsx)("label",{children:"Email"}),(0,a.jsx)("input",{value:_.email,onChange:e=>m({..._,email:e.target.value})}),(0,a.jsx)("span",{className:i.default.changePass,onClick:O,children:"Change Password"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:i.default.uploadBox,onClick:()=>S.current.click(),children:(0,a.jsx)("p",{children:_.image?_.image.name:"Upload profile picture"})}),(0,a.jsx)("input",{ref:S,type:"file",hidden:!0,accept:"image/*",onChange:e=>m({..._,image:e.target.files[0]})}),(0,a.jsxs)("div",{className:i.default.btnRow,children:[(0,a.jsx)("button",{onClick:()=>s("view"),children:"Cancel"}),(0,a.jsx)("button",{onClick:I,children:"Save"})]})]})]}),"otp"===e&&(0,a.jsxs)("div",{className:i.default.centerBox,children:[(0,a.jsx)("h3",{children:"Enter OTP"}),(0,a.jsx)("input",{maxLength:4,value:x,onChange:e=>P(e.target.value)}),(0,a.jsxs)("div",{className:i.default.btnRow,children:[(0,a.jsx)("button",{onClick:()=>s("edit"),children:"Cancel"}),(0,a.jsx)("button",{onClick:y,children:"Continue"})]})]}),"password"===e&&(0,a.jsxs)("div",{className:i.default.centerBox,children:[(0,a.jsxs)("div",{className:i.default.passWrap,children:[(0,a.jsx)("input",{type:j?"text":"password",placeholder:"New password",onChange:e=>g(e.target.value)}),(0,a.jsx)("span",{onClick:()=>v(!j),children:j?o.PASSWORDVIEWICON:o.PASSWORDHIDEICON})]}),(0,a.jsxs)("div",{className:i.default.passWrap,children:[(0,a.jsx)("input",{type:N?"text":"password",placeholder:"Confirm password",onChange:e=>A(e.target.value)}),(0,a.jsx)("span",{onClick:()=>w(!N),children:N?o.PASSWORDVIEWICON:o.PASSWORDHIDEICON})]}),(0,a.jsxs)("div",{className:i.default.btnRow,children:[(0,a.jsx)("button",{onClick:()=>s("edit"),children:"Cancel"}),(0,a.jsx)("button",{onClick:C,children:"Save"})]})]}),"success"===e&&(0,a.jsx)("div",{className:i.default.success,children:"Password Successfully Changed!!"})]}):(0,a.jsx)("p",{style:{padding:20},children:"No profile found"})}e.s(["default",()=>u])}]);