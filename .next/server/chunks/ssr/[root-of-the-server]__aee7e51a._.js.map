{"version":3,"sources":["../../../../src/lib/axiosPublic.js","../../../../src/lib/api/auth.api.js","../../../../src/app/auth/forgot-password/ForgotPasswordClient.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\nconst apiPublic = axios.create({\r\n  baseURL: process.env.NEXT_PUBLIC_API_URL,\r\n});\r\n\r\nconsole.log(\"API BASE URL =>\", process.env.NEXT_PUBLIC_API_URL);\r\n\r\n\r\nexport default apiPublic;   \r\n","import apiPrivate from \"../axiosPrivate\";\r\nimport apiPublic from \"../axiosPublic\";\r\nimport { API_ENDPOINTS } from \"./endpoints\";\r\nimport { handleApi } from \"./apiHelper\";\r\n\r\n/* ================= AUTH ================= */\r\n\r\nexport const signupApi = (data) =>\r\n  handleApi(apiPublic.post(API_ENDPOINTS.AUTH.SIGNUP, data));\r\n\r\nexport const organizerSignupApi = signupApi;\r\n\r\nexport const loginApi = (data) =>\r\n  handleApi(apiPublic.post(API_ENDPOINTS.AUTH.LOGIN, data));\r\n\r\nexport const googleAuthLoginApi = (data) =>\r\n  handleApi(apiPublic.post(API_ENDPOINTS.AUTH.GOOGLE_LOGIN, data));\r\n\r\nexport const forgotApi = (data) =>\r\n  handleApi(apiPublic.post(API_ENDPOINTS.AUTH.FORGOT_PASSWORD, data));\r\n\r\nexport const verifyOtpApi = (data) =>\r\n  handleApi(apiPublic.post(API_ENDPOINTS.AUTH.VERIFY_OTP, data));\r\n\r\nexport const resendOtpApi = (data) =>\r\n  handleApi(apiPublic.post(API_ENDPOINTS.AUTH.RESEND_OTP, data));\r\n\r\nexport const resetPasswordApi = (data) =>\r\n  handleApi(apiPublic.post(API_ENDPOINTS.AUTH.RESET_PASSWORD, data));\r\n\r\nexport const verifyEmailApi = (token) =>\r\n  handleApi(\r\n    apiPublic.get(\r\n      `${API_ENDPOINTS.AUTH.ORG_VERIFY}?token=${encodeURIComponent(token)}`\r\n    )\r\n  );\r\n","\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { useRouter, useSearchParams } from \"next/navigation\";\r\nimport { toast } from \"react-hot-toast\";\r\nimport \"./forgot-password.css\";\r\n\r\n/* VALIDATION */\r\nimport {\r\n  organizerForgotSchema,\r\n  userForgotSchema,\r\n} from \"../../../components/validation\";\r\n\r\n/* CONSTANTS */\r\nimport {\r\n  BTN_OTP_SEND,\r\n  MSG_OTP_SEND_EMAIL,\r\n  MSG_OTP_SEND_EMAIL_ERROR,\r\n  SUB_TITLE_OTP_SEND,\r\n  TEXT_SIGNIN,\r\n  TITLE_ALREADY_HAVE_ACCOUNT,\r\n  ROLE_USER,\r\n  ROLE_ORGANIZER,\r\n} from \"../../../const-value/config-message/page\";\r\n\r\n/* API */\r\nimport { forgotApi } from \"../../../lib/api/auth.api\";\r\n\r\n/* AUTH */\r\nimport { saveEmail } from \"../../../lib/auth\";\r\n\r\n/* LOADING */\r\nimport { useLoading } from \"../../../context/LoadingContext\";\r\n\r\nexport default function ForgotPasswordClient() {\r\n  const router = useRouter();\r\n  const params = useSearchParams();\r\n  const role = params.get(\"role\") || ROLE_USER;\r\n\r\n  const { setLoading } = useLoading();\r\n  const [email, setEmail] = useState(\"\");\r\n\r\n  const config = {\r\n    user: {\r\n      image: \"/images/auth-forgot.png\",\r\n      label: \"Email\",\r\n      login: \"/auth/user/login\",\r\n      redirect: \"/auth/enter-otp?role=user\",\r\n      schema: userForgotSchema,\r\n      type: ROLE_USER,\r\n    },\r\n    organizer: {\r\n      image: \"/images/or_forgotpassword.png\",\r\n      label: \"Domain Mail ID\",\r\n      login: \"/auth/organization/login\",\r\n      redirect: \"/auth/enter-otp?role=organizer\",\r\n      schema: organizerForgotSchema,\r\n      type: ROLE_ORGANIZER,\r\n    },\r\n  };\r\n\r\n  const ui = config[role];\r\n\r\n  async function onSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      await ui.schema.validate({ email }, { abortEarly: false });\r\n    } catch (err) {\r\n      return toast.error(err.errors[0]);\r\n    }\r\n\r\n    setLoading(true);\r\n\r\n    try {\r\n      await forgotApi({\r\n        email,\r\n        type: ui.type,\r\n      });\r\n\r\n      saveEmail(email);\r\n      toast.success(MSG_OTP_SEND_EMAIL);\r\n      router.push(ui.redirect);\r\n    } catch (err) {\r\n      toast.error(err?.message || MSG_OTP_SEND_EMAIL_ERROR);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"org-shell\">\r\n      <aside className=\"org-left\">\r\n        <img src={ui.image} className=\"org-left-img\" alt=\"Forgot Password\" />\r\n      </aside>\r\n\r\n      <main className=\"org-right\">\r\n        <div className=\"org-card\">\r\n          <h2 className=\"org-title\">Forgot Password</h2>\r\n          <p className=\"org-sub\">{SUB_TITLE_OTP_SEND}</p>\r\n\r\n          <form onSubmit={onSubmit}>\r\n            <label className=\"form-label\">{ui.label}</label>\r\n            <input\r\n              className=\"form-control\"\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n              placeholder={ui.label}\r\n            />\r\n\r\n            <div className=\"form-actions\">\r\n              <button type=\"submit\" className=\"btn-primary-ghost\">\r\n                {BTN_OTP_SEND}\r\n              </button>\r\n            </div>\r\n\r\n            <div className=\"org-foot\">\r\n              {TITLE_ALREADY_HAVE_ACCOUNT}{\" \"}\r\n              <a href={ui.login}>{TEXT_SIGNIN}</a>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"6JAEA,IAAM,EAAY,AAFlB,EAAA,CAAA,CAAA,OAEkB,OAAK,CAAC,MAAM,CAAC,CAC7B,OAAO,CAAA,4BACT,GAEA,QAAQ,GAAG,CAAC,kBAAA,+CAGG,4BCTf,EAAA,CAAA,CAAA,OACA,IAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,0BAeyB,AAAC,GACxB,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,EAAA,OAAS,CAAC,IAAI,CAAC,EAAA,aAAa,CAAC,IAAI,CAAC,eAAe,CAAE,2BAJ7B,AAAC,GACjC,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,EAAA,OAAS,CAAC,IAAI,CAAC,EAAA,aAAa,CAAC,IAAI,CAAC,YAAY,CAAE,iBAJpC,AAAC,GACvB,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,EAAA,OAAS,CAAC,IAAI,CAAC,EAAA,aAAa,CAAC,IAAI,CAAC,KAAK,CAAE,qBAWzB,AAAC,GAC3B,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,EAAA,OAAS,CAAC,IAAI,CAAC,EAAA,aAAa,CAAC,IAAI,CAAC,UAAU,CAAE,yBAE1B,AAAC,GAC/B,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,EAAA,OAAS,CAAC,IAAI,CAAC,EAAA,aAAa,CAAC,IAAI,CAAC,cAAc,CAAE,kBArBrC,AAAC,GACxB,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,EAAA,OAAS,CAAC,IAAI,CAAC,EAAA,aAAa,CAAC,IAAI,CAAC,MAAM,CAAE,uBAsBxB,AAAC,GAC7B,CAAA,EAAA,EAAA,SAAA,AAAS,EACP,EAAA,OAAS,CAAC,GAAG,CACX,CAAA,EAAG,EAAA,aAAa,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE,mBAAmB,GAAA,CAAQ,oBAZ/C,AAAC,GAC3B,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,EAAA,OAAS,CAAC,IAAI,CAAC,EAAA,aAAa,CAAC,IAAI,CAAC,UAAU,CAAE,+CCpB1D,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,MAIA,EAAA,EAAA,CAAA,CAAA,OAMA,EAAA,EAAA,CAAA,CAAA,OAYA,EAAA,EAAA,CAAA,CAAA,OAGA,EAAA,EAAA,CAAA,CAAA,OAGA,EAAA,EAAA,CAAA,CAAA,OAEe,SAAS,IACtB,IAAM,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAElB,EADS,AACF,CADE,EAAA,EAAA,eAAA,AAAe,IACV,GAAG,CAAC,SAAW,EAAA,SAAS,CAEtC,YAAE,CAAU,CAAE,CAAG,CAAA,EAAA,EAAA,UAAA,AAAU,IAC3B,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IAqB7B,EAnBS,AAmBJ,CAlBT,KAAM,CACJ,MAAO,0BACP,MAAO,QACP,MAAO,mBACP,SAAU,4BACV,OAAQ,EAAA,gBAAgB,CACxB,KAAM,EAAA,SAAS,AACjB,EACA,UAAW,CACT,MAAO,gCACP,MAAO,iBACP,MAAO,2BACP,SAAU,iCACV,OAAQ,EAAA,qBAAqB,CAC7B,KAAM,EAAA,cAAc,AACtB,CACF,CAEiB,CAAC,EAAK,CAEvB,eAAe,EAAS,CAAC,EACvB,EAAE,cAAc,GAEhB,GAAI,CACF,MAAM,EAAG,MAAM,CAAC,QAAQ,CAAC,OAAE,CAAM,EAAG,CAAE,YAAY,CAAM,EAC1D,CAAE,MAAO,EAAK,CACZ,OAAO,EAAA,KAAK,CAAC,KAAK,CAAC,EAAI,MAAM,CAAC,EAAE,CAClC,CAEA,GAAW,GAEX,GAAI,CACF,MAAM,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,OACd,EACA,KAAM,EAAG,IAAI,AACf,GAEA,CAAA,EAAA,EAAA,SAAS,AAAT,EAAU,GACV,EAAA,KAAK,CAAC,OAAO,CAAC,EAAA,kBAAkB,EAChC,EAAO,IAAI,CAAC,EAAG,QAAQ,CACzB,CAAE,MAAO,EAAK,CACZ,EAAA,KAAK,CAAC,KAAK,CAAC,GAAK,SAAW,EAAA,wBAAwB,CACtD,QAAU,CACR,GAAW,EACb,CACF,CAEA,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,oBACf,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,IAAK,EAAG,KAAK,CAAE,UAAU,eAAe,IAAI,sBAGnD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,qBACd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qBACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qBAAY,oBAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,mBAAW,EAAA,kBAAkB,GAE1C,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,SAAU,YACd,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,sBAAc,EAAG,KAAK,GACvC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,UAAU,eACV,MAAO,EACP,SAAU,AAAC,GAAM,EAAS,EAAE,MAAM,CAAC,KAAK,EACxC,YAAa,EAAG,KAAK,GAGvB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,wBACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,KAAK,SAAS,UAAU,6BAC7B,EAAA,YAAY,KAIjB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qBACZ,EAAA,0BAA0B,CAAE,IAC7B,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,KAAM,EAAG,KAAK,UAAG,EAAA,WAAW,gBAO7C"}