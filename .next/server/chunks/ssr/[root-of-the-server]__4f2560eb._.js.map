{"version":3,"sources":["../../../../src/lib/axiosPublic.js","../../../../src/lib/api/auth.api.js","../../../../src/app/auth/reset-password/page.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\nconst apiPublic = axios.create({\r\n  baseURL: process.env.NEXT_PUBLIC_API_URL,\r\n});\r\n\r\nconsole.log(\"API BASE URL =>\", process.env.NEXT_PUBLIC_API_URL);\r\n\r\n\r\nexport default apiPublic;   \r\n","import apiPrivate from \"../axiosPrivate\";\r\nimport apiPublic from \"../axiosPublic\";\r\nimport { API_ENDPOINTS } from \"./endpoints\";\r\nimport { handleApi } from \"./apiHelper\";\r\n\r\n/* ================= AUTH ================= */\r\n\r\nexport const signupApi = (data) =>\r\n  handleApi(apiPublic.post(API_ENDPOINTS.AUTH.SIGNUP, data));\r\n\r\nexport const organizerSignupApi = signupApi;\r\n\r\nexport const loginApi = (data) =>\r\n  handleApi(apiPublic.post(API_ENDPOINTS.AUTH.LOGIN, data));\r\n\r\nexport const googleAuthLoginApi = (data) =>\r\n  handleApi(apiPublic.post(API_ENDPOINTS.AUTH.GOOGLE_LOGIN, data));\r\n\r\nexport const forgotApi = (data) =>\r\n  handleApi(apiPublic.post(API_ENDPOINTS.AUTH.FORGOT_PASSWORD, data));\r\n\r\nexport const verifyOtpApi = (data) =>\r\n  handleApi(apiPublic.post(API_ENDPOINTS.AUTH.VERIFY_OTP, data));\r\n\r\nexport const resendOtpApi = (data) =>\r\n  handleApi(apiPublic.post(API_ENDPOINTS.AUTH.RESEND_OTP, data));\r\n\r\nexport const resetPasswordApi = (data) =>\r\n  handleApi(apiPublic.post(API_ENDPOINTS.AUTH.RESET_PASSWORD, data));\r\n\r\nexport const verifyEmailApi = (token) =>\r\n  handleApi(\r\n    apiPublic.get(\r\n      `${API_ENDPOINTS.AUTH.ORG_VERIFY}?token=${encodeURIComponent(token)}`\r\n    )\r\n  );\r\n","\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { useSearchParams } from \"next/navigation\";\r\nimport \"./reset-password.css\";\r\n\r\nimport { toast } from \"react-hot-toast\";\r\nimport { resetPasswordApi } from \"../../../lib/api/auth.api\";\r\nimport { clearEmail ,getEmail} from \"../../../lib/auth\";\r\nimport { userResetSchema } from \"../../../components/validation\";\r\nimport { PASSWORDHIDEICON, PASSWORDVIEWICON } from \"../../../const-value/config-icons/page\";\r\nimport { MSG_PASSWORD_UPDATED_SUCCESS,\r\n  MSG_PASSWORD_UPDATED_FAILED,\r\n  TITLE_SET_NEW_PASSWORD,\r\n  SUB_TITLE_SET_NEW_PASSWORD,\r\n  LABEL_SET_NEW_PASSWORD,\r\n  LABEL_CONFIRM_PASSWORD,\r\n  BTN_CONTINUE,\r\n  TITLE_ALREADY_HAVE_ACCOUNT,\r\n  TEXT_SIGNIN,\r\n  ROLE_USER, } from \"../../../const-value/config-message/page\";\r\n\r\nexport default function ResetPasswordPage() {\r\n  const params = useSearchParams();\r\n  const role = params.get(\"role\") || ROLE_USER;\r\n\r\n  const email = getEmail();\r\n\r\n  const [password, setPassword] = useState(\"\");\r\n  const [confirm, setConfirm] = useState(\"\");\r\n  const [show1, setShow1] = useState(false);\r\n  const [show2, setShow2] = useState(false);\r\n\r\n  // ROLE BASED CONFIG\r\n  const config = {\r\n    user: {\r\n      image: \"/images/auth-forgot.png\",\r\n      redirect: \"/auth/success?role=user\",\r\n      login: \"/user/login\",\r\n    },\r\n    organizer: {\r\n      image: \"/images/or_forgotpasswordnextimage.png\",\r\n      redirect: \"/auth/success?role=organizer\",\r\n      login: \"/organizer/login\",\r\n    },\r\n  };\r\n\r\n  const ui = config[role];\r\n\r\n  async function onSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    // YUP VALIDATION\r\n    try {\r\n      await userResetSchema.validate(\r\n        { password, confirmPassword: confirm },\r\n        { abortEarly: false }\r\n      );\r\n    } catch (err) {\r\n      return toast.error(err.errors[0]);\r\n    }\r\n\r\n    // API CALL\r\n    try {\r\n      await resetPasswordApi({\r\n        email,\r\n        password,\r\n      });\r\n\r\n      toast.success(MSG_PASSWORD_UPDATED_SUCCESS);\r\n      clearEmail();\r\n      window.location.href = ui.redirect;\r\n    } catch (err) {\r\n      toast.error(err?.response?.data?.message || MSG_PASSWORD_UPDATED_FAILED);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"org-shell\">\r\n      {/* LEFT IMAGE */}\r\n      <aside className=\"org-left\">\r\n        <img src={ui.image} className=\"org-left-img\" alt=\"reset\" />\r\n      </aside>\r\n\r\n      {/* RIGHT FORM */}\r\n      <main className=\"org-right\">\r\n        <div className=\"org-card\">\r\n          <h2 className=\"org-title\">{TITLE_SET_NEW_PASSWORD}</h2>\r\n          <p className=\"org-sub\">{SUB_TITLE_SET_NEW_PASSWORD}</p>\r\n\r\n          <form onSubmit={onSubmit}>\r\n            {/* NEW PASSWORD */}\r\n            <div className=\"form-group\">\r\n              <label className=\"form-label\">{LABEL_SET_NEW_PASSWORD}</label>\r\n              <div className=\"pass-wrap\">\r\n                <input\r\n                  className=\"form-control\"\r\n                  type={show1 ? \"text\" : \"password\"}\r\n                  value={password}\r\n                  onChange={(e) => setPassword(e.target.value)}\r\n                  placeholder=\"Enter new password\"\r\n                />\r\n                <span\r\n                  className=\"pass-toggle\"\r\n                  onClick={() => setShow1(!show1)}\r\n                >\r\n                  {show1 ? PASSWORDHIDEICON : PASSWORDHIDEICON}\r\n                </span>\r\n              </div>\r\n            </div>\r\n\r\n            {/* CONFIRM PASSWORD */}\r\n            <div className=\"form-group\">\r\n              <label className=\"form-label\">{LABEL_CONFIRM_PASSWORD}</label>\r\n              <div className=\"pass-wrap\">\r\n                <input\r\n                  className=\"form-control\"\r\n                  type={show2 ? \"text\" : \"password\"}\r\n                  value={confirm}\r\n                  onChange={(e) => setConfirm(e.target.value)}\r\n                  placeholder=\"Re-enter password\"\r\n                />\r\n                <span\r\n                  className=\"pass-toggle\"\r\n                  onClick={() => setShow2(!show2)}\r\n                >\r\n                  {show2 ? PASSWORDVIEWICON : PASSWORDHIDEICON}\r\n                </span>\r\n              </div>\r\n            </div>\r\n\r\n            {/* SUBMIT */}\r\n            <div className=\"form-actions\">\r\n              <button className=\"btn-primary-ghost\" type=\"submit\">\r\n                {BTN_CONTINUE}\r\n              </button>\r\n            </div>\r\n\r\n            {/* FOOTER */}\r\n            <div className=\"org-foot\">\r\n              {TITLE_ALREADY_HAVE_ACCOUNT}{\" \"}\r\n              <a href={ui.login}>{TEXT_SIGNIN}</a>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"6JAEA,IAAM,EAFN,AAEkB,EAFlB,CAAA,CAAA,OAEkB,OAAK,CAAC,MAAM,CAAC,CAC7B,OAAO,CAAA,4BACT,GAEA,QAAQ,GAAG,CAAC,kBAAA,+CAGG,4BCTf,EAAA,CAAA,CAAA,OACA,IAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,0BAeyB,AAAC,GACxB,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,EAAA,OAAS,CAAC,IAAI,CAAC,EAAA,aAAa,CAAC,IAAI,CAAC,eAAe,CAAE,iBAPvC,AAAC,GACvB,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,EAAA,OAAS,CAAC,IAAI,CAAC,EAAA,aAAa,CAAC,IAAI,CAAC,KAAK,CAAE,qBAWzB,AAAC,GAC3B,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,EAAA,OAAS,CAAC,IAAI,CAAC,EAAA,aAAa,CAAC,IAAI,CAAC,UAAU,CAAE,yBAE1B,AAAC,GAC/B,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,EAAA,OAAS,CAAC,IAAI,CAAC,EAAA,aAAa,CAAC,IAAI,CAAC,cAAc,CAAE,kBArBrC,AAAC,GACxB,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,EAAA,OAAS,CAAC,IAAI,CAAC,EAAA,aAAa,CAAC,IAAI,CAAC,MAAM,CAAE,uBAsBxB,AAAC,GAC7B,CAAA,EAAA,EAAA,SAAA,AAAS,EACP,EAAA,OAAS,CAAC,GAAG,CACX,CAAA,EAAG,EAAA,aAAa,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE,mBAAmB,GAAA,CAAQ,oBAZ9C,AAAD,GAC1B,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,EAAA,OAAS,CAAC,IAAI,CAAC,EAAA,aAAa,CAAC,IAAI,CAAC,UAAU,CAAE,+CCpB1D,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAGA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAWe,SAAS,IAEtB,IAAM,EADS,AACF,AADE,CAAA,EAAA,EAAA,eAAA,AAAe,IACV,GAAG,CAAC,SAAW,EAAA,SAAS,CAEtC,EAAQ,CAAA,EAAA,EAAA,QAAA,AAAQ,IAEhB,CAAC,EAAU,EAAY,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACnC,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAC,IACjC,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAQ,AAAR,GAAS,GAC7B,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,GAgB7B,EAbS,AAaJ,CAZT,KAAM,CACJ,MAAO,0BACP,SAAU,0BACV,MAAO,aACT,EACA,UAAW,CACT,MAAO,yCACP,SAAU,+BACV,MAAO,kBACT,CACF,CAEiB,CAAC,EAAK,CAEvB,eAAe,EAAS,CAAC,EACvB,EAAE,cAAc,GAGhB,GAAI,CACF,MAAM,EAAA,eAAe,CAAC,QAAQ,CAC5B,UAAE,EAAU,gBAAiB,CAAQ,EACrC,CAAE,YAAY,CAAM,EAExB,CAAE,MAAO,EAAK,CACZ,OAAO,EAAA,KAAK,CAAC,KAAK,CAAC,EAAI,MAAM,CAAC,EAAE,CAClC,CAGA,GAAI,CACF,MAAM,CAAA,EAAA,EAAA,gBAAA,AAAgB,EAAC,OACrB,WACA,CACF,GAEA,EAAA,KAAK,CAAC,OAAO,CAAC,EAAA,4BAA4B,EAC1C,CAAA,EAAA,EAAA,UAAA,AAAU,IACV,OAAO,QAAQ,CAAC,IAAI,CAAG,EAAG,QAAQ,AACpC,CAAE,MAAO,EAAK,CACZ,EAAA,KAAK,CAAC,KAAK,CAAC,GAAK,UAAU,MAAM,SAAW,EAAA,2BAA2B,CACzE,CACF,CAEA,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBAEb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,oBACf,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,IAAK,EAAG,KAAK,CAAE,UAAU,eAAe,IAAI,YAInD,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,qBACd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qBACb,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,qBAAa,EAAA,sBAAsB,GACjD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,mBAAW,EAAA,0BAA0B,GAElD,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CAAK,SAAU,YAEd,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uBACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,sBAAc,EAAA,sBAAsB,GACrD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,UAAU,eACV,KAAM,EAAQ,OAAS,WACvB,MAAO,EACP,SAAU,AAAC,GAAM,EAAY,EAAE,MAAM,CAAC,KAAK,EAC3C,YAAY,uBAEd,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CACC,UAAU,cACV,QAAS,IAAM,EAAS,CAAC,YAEhB,CAAR,CAAQ,gBAAgB,GAAG,MAMlC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uBACb,CAPgD,AAOhD,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,UAAU,sBAAc,EAAA,sBAAsB,GACrD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,sBACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,UAAU,eACV,KAAM,EAAQ,OAAS,WACvB,MAAO,EACP,SAAU,AAAC,GAAM,EAAW,EAAE,MAAM,CAAC,KAAK,EAC1C,YAAY,sBAEd,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CACC,UAAU,cACV,QAAS,IAAM,EAAS,CAAC,YAExB,EAAQ,EAAA,gBAAgB,CAAG,EAAA,gBAAgB,SAMlD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,wBACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,UAAU,oBAAoB,KAAK,kBACxC,EAAA,YAAY,KAKjB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,qBACZ,EAAA,0BAA0B,CAAE,IAC7B,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,KAAM,EAAG,KAAK,UAAG,EAAA,WAAW,gBAO7C"}