module.exports=[20052,a=>{"use strict";let b=a.i(83490).default.create({baseURL:"http://3.6.238.72:5000/api"});console.log("API BASE URL =>","http://3.6.238.72:5000/api"),a.s(["default",0,b])},65387,a=>{"use strict";a.i(58822);var b=a.i(20052),c=a.i(54345),d=a.i(22314);a.s(["forgotApi",0,a=>(0,d.handleApi)(b.default.post(c.API_ENDPOINTS.AUTH.FORGOT_PASSWORD,a)),"loginApi",0,a=>(0,d.handleApi)(b.default.post(c.API_ENDPOINTS.AUTH.LOGIN,a)),"resendOtpApi",0,a=>(0,d.handleApi)(b.default.post(c.API_ENDPOINTS.AUTH.RESEND_OTP,a)),"resetPasswordApi",0,a=>(0,d.handleApi)(b.default.post(c.API_ENDPOINTS.AUTH.RESET_PASSWORD,a)),"signupApi",0,a=>(0,d.handleApi)(b.default.post(c.API_ENDPOINTS.AUTH.SIGNUP,a)),"verifyEmailApi",0,a=>(0,d.handleApi)(b.default.get(`${c.API_ENDPOINTS.AUTH.ORG_VERIFY}?token=${encodeURIComponent(a)}`)),"verifyOtpApi",0,a=>(0,d.handleApi)(b.default.post(c.API_ENDPOINTS.AUTH.VERIFY_OTP,a))])},18009,a=>{a.v({btnRow:"Profile-module__rfW_xW__btnRow",cancelBtn:"Profile-module__rfW_xW__cancelBtn",changePassword:"Profile-module__rfW_xW__changePassword",editBox:"Profile-module__rfW_xW__editBox",editIcon:"Profile-module__rfW_xW__editIcon",eyeIcon:"Profile-module__rfW_xW__eyeIcon",inputWrapper:"Profile-module__rfW_xW__inputWrapper",left:"Profile-module__rfW_xW__left",otpBox:"Profile-module__rfW_xW__otpBox",otpInputs:"Profile-module__rfW_xW__otpInputs",passwordBox:"Profile-module__rfW_xW__passwordBox",profileWrapper:"Profile-module__rfW_xW__profileWrapper",resend:"Profile-module__rfW_xW__resend",saveBtn:"Profile-module__rfW_xW__saveBtn",successBox:"Profile-module__rfW_xW__successBox",uploadBox:"Profile-module__rfW_xW__uploadBox",viewBox:"Profile-module__rfW_xW__viewBox"})},28440,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(18009),e=a.i(6704),f=a.i(23094),g=a.i(49658),h=a.i(65387),i=a.i(14913),j=a.i(29811);let k=a=>a?.type==="org"?{getProfile:f.getOrganizationProfileApi,updateProfile:f.updateOrganizationProfileApi,nameKey:"organizationName",emailKey:"domainEmail"}:{getProfile:g.getUserProfileApi,updateProfile:g.updateUserProfileApi,nameKey:"name",emailKey:"email"};function l(){let[a,f]=(0,c.useState)("view"),[g,l]=(0,c.useState)(null),[m,n]=(0,c.useState)(!0),[o,p]=(0,c.useState)({name:"",email:"",image:null}),[q,r]=(0,c.useState)(""),[s,t]=(0,c.useState)(""),[u,v]=(0,c.useState)(""),[w,x]=(0,c.useState)(!1),[y,z]=(0,c.useState)(!1),A=(0,c.useRef)(null);(0,c.useEffect)(()=>{!async function(){try{let a=(0,i.getUserData)();if(!a?.identity)return;let b=k(a),c=await b.getProfile(a.identity);c?.status&&(l(c.data),p({name:c.data[b.nameKey]||"",email:c.data[b.emailKey]||"",image:null}))}catch(a){e.default.error("Failed to load profile")}finally{n(!1)}}()},[]);let B=async()=>{try{let a=(0,i.getUserData)(),b=k(a),c=new FormData;c.append(b.nameKey,o.name),c.append(b.emailKey,o.email),o.image&&c.append("image",o.image);let d=await b.updateProfile(a.identity,c);d?.status?(l(d.data),e.default.success("Profile updated"),f("view")):e.default.error("Update failed")}catch{e.default.error("Update failed")}},C=async()=>{await (0,h.forgotApi)({email:o.email}),e.default.success("OTP sent"),f("otp")},D=async()=>{await (0,h.verifyOtpApi)({email:o.email,otp:q}),e.default.success("OTP verified"),f("password")},E=async()=>{if(s!==u)return e.default.error("Passwords not matching");await (0,h.resetPasswordApi)({email:o.email,password:s}),e.default.success("Password updated"),f("success")};return m?(0,b.jsx)("p",{style:{padding:20},children:"Loading..."}):g?(0,b.jsxs)("div",{className:d.default.wrapper,children:["view"===a&&(0,b.jsxs)("div",{className:d.default.viewBox,children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{children:"Full Name"}),(0,b.jsx)("p",{children:o.name})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{children:"Email"}),(0,b.jsx)("p",{children:o.email})]}),(0,b.jsx)("img",{src:"/images/Pen.png",className:d.default.editIcon,onClick:()=>f("edit")})]}),"edit"===a&&(0,b.jsxs)("div",{className:d.default.editBox,children:[(0,b.jsxs)("div",{className:d.default.left,children:[(0,b.jsx)("label",{children:"Full Name"}),(0,b.jsx)("input",{value:o.name,onChange:a=>p({...o,name:a.target.value})}),(0,b.jsx)("label",{children:"Email"}),(0,b.jsx)("input",{value:o.email,onChange:a=>p({...o,email:a.target.value})}),(0,b.jsx)("span",{className:d.default.changePass,onClick:C,children:"Change Password"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:d.default.uploadBox,onClick:()=>A.current.click(),children:(0,b.jsx)("p",{children:o.image?o.image.name:"Upload profile picture"})}),(0,b.jsx)("input",{ref:A,type:"file",hidden:!0,accept:"image/*",onChange:a=>p({...o,image:a.target.files[0]})}),(0,b.jsxs)("div",{className:d.default.btnRow,children:[(0,b.jsx)("button",{onClick:()=>f("view"),children:"Cancel"}),(0,b.jsx)("button",{onClick:B,children:"Save"})]})]})]}),"otp"===a&&(0,b.jsxs)("div",{className:d.default.centerBox,children:[(0,b.jsx)("h3",{children:"Enter OTP"}),(0,b.jsx)("input",{maxLength:4,value:q,onChange:a=>r(a.target.value)}),(0,b.jsxs)("div",{className:d.default.btnRow,children:[(0,b.jsx)("button",{onClick:()=>f("edit"),children:"Cancel"}),(0,b.jsx)("button",{onClick:D,children:"Continue"})]})]}),"password"===a&&(0,b.jsxs)("div",{className:d.default.centerBox,children:[(0,b.jsxs)("div",{className:d.default.passWrap,children:[(0,b.jsx)("input",{type:w?"text":"password",placeholder:"New password",onChange:a=>t(a.target.value)}),(0,b.jsx)("span",{onClick:()=>x(!w),children:w?j.PASSWORDVIEWICON:j.PASSWORDHIDEICON})]}),(0,b.jsxs)("div",{className:d.default.passWrap,children:[(0,b.jsx)("input",{type:y?"text":"password",placeholder:"Confirm password",onChange:a=>v(a.target.value)}),(0,b.jsx)("span",{onClick:()=>z(!y),children:y?j.PASSWORDVIEWICON:j.PASSWORDHIDEICON})]}),(0,b.jsxs)("div",{className:d.default.btnRow,children:[(0,b.jsx)("button",{onClick:()=>f("edit"),children:"Cancel"}),(0,b.jsx)("button",{onClick:E,children:"Save"})]})]}),"success"===a&&(0,b.jsx)("div",{className:d.default.success,children:"Password Successfully Changed!!"})]}):(0,b.jsx)("p",{style:{padding:20},children:"No profile found"})}a.s(["default",()=>l])}];

//# sourceMappingURL=src_586e322c._.js.map