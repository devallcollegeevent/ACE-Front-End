{"version":3,"sources":["../../../../src/lib/axiosPublic.js","../../../../src/lib/api/auth.api.js","../../../../src/app/auth/reset-password/ResetPasswordClient.js"],"sourcesContent":["import axios from \"axios\";\r\n\r\nconst apiPublic = axios.create({\r\n  baseURL: process.env.NEXT_PUBLIC_API_URL,\r\n});\r\n\r\nconsole.log(\"API BASE URL =>\", process.env.NEXT_PUBLIC_API_URL);\r\n\r\n\r\nexport default apiPublic;   \r\n","import apiPrivate from \"../axiosPrivate\";\r\nimport apiPublic from \"../axiosPublic\";\r\nimport { API_ENDPOINTS } from \"./endpoints\";\r\nimport { handleApi } from \"./apiHelper\";\r\n\r\n/* ================= AUTH ================= */\r\n\r\nexport const signupApi = (data) =>\r\n  handleApi(apiPublic.post(API_ENDPOINTS.AUTH.SIGNUP, data));\r\n\r\nexport const organizerSignupApi = signupApi;\r\n\r\nexport const loginApi = (data) =>\r\n  handleApi(apiPublic.post(API_ENDPOINTS.AUTH.LOGIN, data));\r\n\r\nexport const googleAuthLoginApi = (data) =>\r\n  handleApi(apiPublic.post(API_ENDPOINTS.AUTH.GOOGLE_LOGIN, data));\r\n\r\nexport const forgotApi = (data) =>\r\n  handleApi(apiPublic.post(API_ENDPOINTS.AUTH.FORGOT_PASSWORD, data));\r\n\r\nexport const verifyOtpApi = (data) =>\r\n  handleApi(apiPublic.post(API_ENDPOINTS.AUTH.VERIFY_OTP, data));\r\n\r\nexport const resendOtpApi = (data) =>\r\n  handleApi(apiPublic.post(API_ENDPOINTS.AUTH.RESEND_OTP, data));\r\n\r\nexport const resetPasswordApi = (data) =>\r\n  handleApi(apiPublic.post(API_ENDPOINTS.AUTH.RESET_PASSWORD, data));\r\n\r\nexport const verifyEmailApi = (token) =>\r\n  handleApi(\r\n    apiPublic.get(\r\n      `${API_ENDPOINTS.AUTH.ORG_VERIFY}?token=${encodeURIComponent(token)}`\r\n    )\r\n  );\r\n","\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { useSearchParams } from \"next/navigation\";\r\nimport \"./reset-password.css\";\r\n\r\nimport { toast } from \"react-hot-toast\";\r\nimport { resetPasswordApi } from \"../../../lib/api/auth.api\";\r\nimport { clearEmail, getEmail } from \"../../../lib/auth\";\r\nimport { userResetSchema } from \"../../../components/validation\";\r\nimport {\r\n  PASSWORDHIDEICON,\r\n  PASSWORDVIEWICON,\r\n} from \"../../../const-value/config-icons/page\";\r\nimport {\r\n  MSG_PASSWORD_UPDATED_SUCCESS,\r\n  MSG_PASSWORD_UPDATED_FAILED,\r\n  TITLE_SET_NEW_PASSWORD,\r\n  SUB_TITLE_SET_NEW_PASSWORD,\r\n  LABEL_SET_NEW_PASSWORD,\r\n  LABEL_CONFIRM_PASSWORD,\r\n  BTN_CONTINUE,\r\n  TITLE_ALREADY_HAVE_ACCOUNT,\r\n  TEXT_SIGNIN,\r\n  ROLE_USER,\r\n} from \"../../../const-value/config-message/page\";\r\nimport { useLoading } from \"../../../context/LoadingContext\";\r\n\r\nexport default function ResetPasswordClient() {\r\n  const params = useSearchParams();\r\n  const role = params.get(\"role\") || ROLE_USER;\r\n\r\n  const { setLoading } = useLoading();\r\n  const email = getEmail();\r\n\r\n  const [password, setPassword] = useState(\"\");\r\n  const [confirm, setConfirm] = useState(\"\");\r\n  const [show1, setShow1] = useState(false);\r\n  const [show2, setShow2] = useState(false);\r\n\r\n  const config = {\r\n    user: {\r\n      image: \"/images/auth-forgot.png\",\r\n      redirect: \"/auth/success?role=user\",\r\n      login: \"/user/login\",\r\n    },\r\n    organizer: {\r\n      image: \"/images/or_forgotpasswordnextimage.png\",\r\n      redirect: \"/auth/success?role=organizer\",\r\n      login: \"/organizer/login\",\r\n    },\r\n  };\r\n\r\n  const ui = config[role];\r\n\r\n  async function onSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      await userResetSchema.validate(\r\n        { password, confirmPassword: confirm },\r\n        { abortEarly: false }\r\n      );\r\n    } catch (err) {\r\n      return toast.error(err.errors[0]);\r\n    }\r\n\r\n    try {\r\n      setLoading(true);\r\n      await resetPasswordApi({ email, password });\r\n      toast.success(MSG_PASSWORD_UPDATED_SUCCESS);\r\n      clearEmail();\r\n      window.location.href = ui.redirect;\r\n    } catch (err) {\r\n      toast.error(err?.response?.data?.message || MSG_PASSWORD_UPDATED_FAILED);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"org-shell\">\r\n      <aside className=\"org-left\">\r\n        <img src={ui.image} className=\"org-left-img\" alt=\"reset\" />\r\n      </aside>\r\n\r\n      <main className=\"org-right\">\r\n        <div className=\"org-card\">\r\n          <h2 className=\"org-title\">{TITLE_SET_NEW_PASSWORD}</h2>\r\n          <p className=\"org-sub\">{SUB_TITLE_SET_NEW_PASSWORD}</p>\r\n\r\n          <form onSubmit={onSubmit}>\r\n            {/* inputs unchanged */}\r\n          </form>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}