{"version":3,"sources":["../../../../src/app/auth/organization/signup/details/SignupDetailsClient.js","../../../../src/lib/location.api.js"],"sourcesContent":["\"use client\";\r\n\r\nimport \"../../auth-common.css\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useRouter, useSearchParams } from \"next/navigation\";\r\nimport { toast } from \"react-hot-toast\";\r\n\r\nimport {\r\n  LABEL_ORG_STEP_CATEGORY,\r\n  LABEL_ORG_STEP_DETAILS,\r\n  LABEL_ORG_STEP_ACCOUNT,\r\n  SUBTITLE_ORG_DETAILS,\r\n  BTN_CONTINUE,\r\n\r\n  LABEL_ORG_COUNTRY,\r\n  LABEL_ORG_STATE,\r\n  LABEL_ORG_CITY,\r\n  LABEL_ORG_NAME,\r\n\r\n  LABEL_ORG_SELECT_COUNTRY,\r\n  LABEL_ORG_SELECT_STATE,\r\n  LABEL_ORG_SELECT_CITY,\r\n\r\n  LABEL_LOADING,\r\n  LABEL_LOADING_STATES,\r\n  LABEL_LOADING_CITIES,\r\n\r\n  MSG_ERR_FILL_ALL_FIELDS,\r\n  MSG_ORG_SELECT_COUNTRY,\r\n  MSG_ORG_SELECT_STATE,\r\n} from \"../../../../../const-value/config-message/page\";\r\n\r\nimport {\r\n  getCountries,\r\n  getStates,\r\n  getCities,\r\n} from \"../../../../../lib/location.api\";\r\nimport { useLoading } from \"../../../../../context/LoadingContext\";\r\n\r\nexport default function Page() {\r\n  const router = useRouter();\r\n  const params = useSearchParams();\r\n  const category = params.get(\"cat\");\r\n\r\n  const { setLoading } = useLoading(); \r\n\r\n  const [country, setCountry] = useState(\"\");\r\n  const [stateName, setStateName] = useState(\"\");\r\n  const [city, setCity] = useState(\"\");\r\n  const [orgName, setOrgName] = useState(\"\");\r\n\r\n  const [countries, setCountries] = useState([]);\r\n  const [states, setStates] = useState([]);\r\n  const [cities, setCities] = useState([]);\r\n\r\n  const [loadingCountry, setLoadingCountry] = useState(false);\r\n  const [loadingState, setLoadingState] = useState(false);\r\n  const [loadingCity, setLoadingCity] = useState(false);\r\n\r\n  /* LOAD COUNTRIES */\r\n  useEffect(() => {\r\n    async function load() {\r\n      setLoading(true);            \r\n      setLoadingCountry(true);\r\n\r\n      const data = await getCountries();\r\n      setCountries(data || []);\r\n\r\n      setLoadingCountry(false);\r\n      setLoading(false);         \r\n    }\r\n    load();\r\n  }, [setLoading]);\r\n\r\n  /* LOAD STATES */\r\n  useEffect(() => {\r\n    if (!country) {\r\n      setStates([]);\r\n      setStateName(\"\");\r\n      return;\r\n    }\r\n\r\n    async function load() {\r\n      setLoading(true);           \r\n      setLoadingState(true);\r\n\r\n      const data = await getStates(country);\r\n      setStates(data || []);\r\n\r\n      setLoadingState(false);\r\n      setLoading(false);          \r\n    }\r\n    load();\r\n  }, [country, setLoading]);\r\n\r\n  /* LOAD CITIES */\r\n  useEffect(() => {\r\n    if (!stateName) {\r\n      setCities([]);\r\n      setCity(\"\");\r\n      return;\r\n    }\r\n\r\n    async function load() {\r\n      setLoading(true);           \r\n      setLoadingCity(true);\r\n\r\n      const data = await getCities(country, stateName);\r\n      setCities(data || []);\r\n\r\n      setLoadingCity(false);\r\n      setLoading(false);         \r\n    }\r\n    load();\r\n  }, [stateName, country, setLoading]);\r\n\r\n  function onContinue(e) {\r\n    e.preventDefault();\r\n\r\n    if (!country || !stateName || !city || !orgName) {\r\n      return toast.error(MSG_ERR_FILL_ALL_FIELDS);\r\n    }\r\n\r\n    setLoading(true);\r\n    router.push(\r\n      `/auth/organization/signup/account?cat=${category}&country=${country}&state=${stateName}&city=${city}&orgName=${orgName}`\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"org-shell\">\r\n      {/* LEFT IMAGE â€“ SAME AS OLD */}\r\n      <aside\r\n        className=\"org-left\"\r\n        style={{ backgroundImage: \"url('/images/organizer-bg-circles.png')\" }}\r\n      >\r\n        <img\r\n          src=\"/images/organizer-rocket.png\"\r\n          alt=\"rocket\"\r\n          className=\"org-left-img\"\r\n        />\r\n      </aside>\r\n\r\n      {/* RIGHT FORM */}\r\n      <main className=\"org-right\">\r\n        <div className=\"org-card\">\r\n          {/* STEPPER */}\r\n          <div className=\"org-stepper\">\r\n            <div className=\"org-step active\">\r\n              <div className=\"dot\">1</div>\r\n              <small>{LABEL_ORG_STEP_CATEGORY}</small>\r\n            </div>\r\n\r\n            <div className=\"line active\"></div>\r\n\r\n            <div className=\"org-step active\">\r\n              <div className=\"dot\">2</div>\r\n              <small>{LABEL_ORG_STEP_DETAILS}</small>\r\n            </div>\r\n\r\n            <div className=\"line\"></div>\r\n\r\n            <div className=\"org-step\">\r\n              <div className=\"dot\">3</div>\r\n              <small>{LABEL_ORG_STEP_ACCOUNT}</small>\r\n            </div>\r\n          </div>\r\n\r\n          <h2 className=\"org-title\">{LABEL_ORG_STEP_DETAILS}</h2>\r\n          <p className=\"org-sub\">{SUBTITLE_ORG_DETAILS}</p>\r\n\r\n          <form className=\"org-form\" onSubmit={onContinue}>\r\n            {/* COUNTRY */}\r\n            <div className=\"form-group\">\r\n              <label className=\"form-label\">{LABEL_ORG_COUNTRY}</label>\r\n              <select\r\n                className=\"form-control\"\r\n                value={country}\r\n                onChange={(e) => setCountry(e.target.value)}\r\n              >\r\n                <option value=\"\">\r\n                  {loadingCountry ? LABEL_LOADING : LABEL_ORG_SELECT_COUNTRY}\r\n                </option>\r\n                {countries.map((c) => (\r\n                  <option key={c.name} value={c.name}>\r\n                    {c.name}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n\r\n            {/* STATE */}\r\n            <div className=\"form-group\">\r\n              <label className=\"form-label\">{LABEL_ORG_STATE}</label>\r\n              <select\r\n                className=\"form-control\"\r\n                value={stateName}\r\n                onChange={(e) => setStateName(e.target.value)}\r\n              >\r\n                <option value=\"\">\r\n                  {!country\r\n                    ? MSG_ORG_SELECT_COUNTRY\r\n                    : loadingState\r\n                    ? LABEL_LOADING_STATES\r\n                    : LABEL_ORG_SELECT_STATE}\r\n                </option>\r\n                {states.map((s) => (\r\n                  <option key={s.name} value={s.name}>\r\n                    {s.name}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n\r\n            {/* CITY */}\r\n            <div className=\"form-group\">\r\n              <label className=\"form-label\">{LABEL_ORG_CITY}</label>\r\n              <select\r\n                className=\"form-control\"\r\n                value={city}\r\n                onChange={(e) => setCity(e.target.value)}\r\n              >\r\n                <option value=\"\">\r\n                  {!stateName\r\n                    ? MSG_ORG_SELECT_STATE\r\n                    : loadingCity\r\n                    ? LABEL_LOADING_CITIES\r\n                    : LABEL_ORG_SELECT_CITY}\r\n                </option>\r\n                {cities.map((ct) => (\r\n                  <option key={ct.name} value={ct.name}>\r\n                    {ct.name}\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n\r\n            {/* ORG NAME */}\r\n            <div className=\"form-group\">\r\n              <label className=\"form-label\">{LABEL_ORG_NAME}</label>\r\n              <input\r\n                className=\"form-control\"\r\n                value={orgName}\r\n                onChange={(e) => setOrgName(e.target.value)}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"org-actions\">\r\n              <button className=\"btn-primary-ghost\" type=\"submit\">\r\n                {BTN_CONTINUE}\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n","const BASE = process.env.NEXT_PUBLIC_LOCATION_API_BASE;\r\n\r\nexport const getCountries = async () => {\r\n  const res = await fetch(`${BASE}/countries/iso`);\r\n  const json = await res.json();\r\n  return json.data.map((c) => ({ code: c.Iso2, name: c.name }));\r\n};\r\n\r\nexport const getStates = async (country) => {\r\n  const res = await fetch(`${BASE}/countries/states`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify({ country }),\r\n  });\r\n  const json = await res.json();\r\n  return json.data.states.map((s) => ({ code: s.name, name: s.name }));\r\n};\r\n\r\nexport const getCities = async (country, state) => {\r\n  const res = await fetch(`${BASE}/countries/state/cities`, {\r\n    method: \"POST\",\r\n    headers: { \"Content-Type\": \"application/json\" },\r\n    body: JSON.stringify({ country, state }),\r\n  });\r\n  const json = await res.json();\r\n  return json.data.map((c) => ({ code: c, name: c }));\r\n};\r\n"],"names":[],"mappings":"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"}