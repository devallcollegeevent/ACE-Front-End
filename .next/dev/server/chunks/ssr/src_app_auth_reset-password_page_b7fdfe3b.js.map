{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Downloads/ace-nextjs-full-project/src/app/auth/reset-password/page.js"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { useSearchParams } from \"next/navigation\";\r\nimport \"@/app/auth/auth-common.css\";\r\n\r\nimport { resetPasswordApi } from \"@/lib/apiClient\";\r\nimport { clearEmail, getEmail } from \"@/lib/auth\";\r\nimport { toast } from \"react-hot-toast\";\r\nimport { ViewIcon, HideIcon } from \"@/components/icons/Icons\";\r\n\r\nimport { userResetSchema } from \"@/components/validation\";\r\n\r\nimport {\r\n  MSG_PASSWORD_UPDATED_SUCCESS,\r\n  MSG_PASSWORD_UPDATED_FAILED,\r\n  TITLE_SET_NEW_PASSWORD,\r\n  SUB_TITLE_SET_NEW_PASSWORD,\r\n  LABEL_SET_NEW_PASSWORD,\r\n  LABEL_CONFIRM_PASSWORD,\r\n  BTN_CONTINUE,\r\n  TITLE_ALREADY_HAVE_ACCOUNT,\r\n  TEXT_SIGNIN,\r\n  ROLE_USER,\r\n} from \"@/const-value/config-message/page\";\r\n\r\nexport default function ResetPasswordPage() {\r\n  const params = useSearchParams();\r\n  const role = params.get(\"role\") || ROLE_USER;\r\n\r\n  const email = getEmail();\r\n\r\n  const [password, setPassword] = useState(\"\");\r\n  const [confirm, setConfirm] = useState(\"\");\r\n  const [show1, setShow1] = useState(false);\r\n  const [show2, setShow2] = useState(false);\r\n\r\n  // ROLE BASED CONFIG\r\n  const config = {\r\n    user: {\r\n      image: \"/images/auth-forgot.png\",\r\n      redirect: \"/auth/success?role=user\",\r\n      login: \"/user/login\",\r\n    },\r\n    organizer: {\r\n      image: \"/images/or_forgotpasswordnextimage.png\",\r\n      redirect: \"/auth/success?role=organizer\",\r\n      login: \"/organizer/login\",\r\n    },\r\n  };\r\n\r\n  const ui = config[role];\r\n\r\n  async function onSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    // YUP VALIDATION\r\n    try {\r\n      await userResetSchema.validate(\r\n        { password, confirmPassword: confirm },\r\n        { abortEarly: false }\r\n      );\r\n    } catch (err) {\r\n      return toast.error(err.errors[0]);\r\n    }\r\n\r\n    // API CALL\r\n    try {\r\n      await resetPasswordApi({\r\n        email,\r\n        password,\r\n      });\r\n\r\n      toast.success(MSG_PASSWORD_UPDATED_SUCCESS);\r\n      clearEmail();\r\n      window.location.href = ui.redirect;\r\n    } catch (err) {\r\n      toast.error(err?.response?.data?.message || MSG_PASSWORD_UPDATED_FAILED);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"org-shell\">\r\n      {/* LEFT IMAGE */}\r\n      <aside className=\"org-left\">\r\n        <img src={ui.image} className=\"org-left-img\" alt=\"reset\" />\r\n      </aside>\r\n\r\n      {/* RIGHT FORM */}\r\n      <main className=\"org-right\">\r\n        <div className=\"org-card\">\r\n          <h2 className=\"org-title\">{TITLE_SET_NEW_PASSWORD}</h2>\r\n          <p className=\"org-sub\">{SUB_TITLE_SET_NEW_PASSWORD}</p>\r\n\r\n          <form onSubmit={onSubmit}>\r\n            {/* NEW PASSWORD */}\r\n            <div className=\"form-group\">\r\n              <label className=\"form-label\">{LABEL_SET_NEW_PASSWORD}</label>\r\n              <div className=\"pass-wrap\">\r\n                <input\r\n                  className=\"form-control\"\r\n                  type={show1 ? \"text\" : \"password\"}\r\n                  value={password}\r\n                  onChange={(e) => setPassword(e.target.value)}\r\n                  placeholder=\"Enter new password\"\r\n                />\r\n                <span\r\n                  className=\"pass-toggle\"\r\n                  onClick={() => setShow1(!show1)}\r\n                >\r\n                  {show1 ? <ViewIcon /> : <HideIcon />}\r\n                </span>\r\n              </div>\r\n            </div>\r\n\r\n            {/* CONFIRM PASSWORD */}\r\n            <div className=\"form-group\">\r\n              <label className=\"form-label\">{LABEL_CONFIRM_PASSWORD}</label>\r\n              <div className=\"pass-wrap\">\r\n                <input\r\n                  className=\"form-control\"\r\n                  type={show2 ? \"text\" : \"password\"}\r\n                  value={confirm}\r\n                  onChange={(e) => setConfirm(e.target.value)}\r\n                  placeholder=\"Re-enter password\"\r\n                />\r\n                <span\r\n                  className=\"pass-toggle\"\r\n                  onClick={() => setShow2(!show2)}\r\n                >\r\n                  {show2 ? <ViewIcon /> : <HideIcon />}\r\n                </span>\r\n              </div>\r\n            </div>\r\n\r\n            {/* SUBMIT */}\r\n            <div className=\"form-actions\">\r\n              <button className=\"btn-primary-ghost\" type=\"submit\">\r\n                {BTN_CONTINUE}\r\n              </button>\r\n            </div>\r\n\r\n            {/* FOOTER */}\r\n            <div className=\"org-foot\">\r\n              {TITLE_ALREADY_HAVE_ACCOUNT}{\" \"}\r\n              <a href={ui.login}>{TEXT_SIGNIN}</a>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;;;;;;;;;;;;;;AAKA;;;;;;;;;;;;;;;;AARA;;;;;;;;;;;AA0Be,SAAS;IACtB,MAAM,SAAS,IAAA,qJAAe;IAC9B,MAAM,OAAO,OAAO,GAAG,CAAC,WAAW;IAEnC,MAAM,QAAQ;IAEd,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAC;IACzC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IACnC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IAEnC,oBAAoB;IACpB,MAAM,SAAS;QACb,MAAM;YACJ,OAAO;YACP,UAAU;YACV,OAAO;QACT;QACA,WAAW;YACT,OAAO;YACP,UAAU;YACV,OAAO;QACT;IACF;IAEA,MAAM,KAAK,MAAM,CAAC,KAAK;IAEvB,eAAe,SAAS,CAAC;QACvB,EAAE,cAAc;QAEhB,iBAAiB;QACjB,IAAI;YACF,MAAM,gBAAgB,QAAQ,CAC5B;gBAAE;gBAAU,iBAAiB;YAAQ,GACrC;gBAAE,YAAY;YAAM;QAExB,EAAE,OAAO,KAAK;YACZ,OAAO,gKAAK,CAAC,KAAK,CAAC,IAAI,MAAM,CAAC,EAAE;QAClC;QAEA,WAAW;QACX,IAAI;YACF,MAAM,iBAAiB;gBACrB;gBACA;YACF;YAEA,gKAAK,CAAC,OAAO,CAAC;YACd;YACA,OAAO,QAAQ,CAAC,IAAI,GAAG,GAAG,QAAQ;QACpC,EAAE,OAAO,KAAK;YACZ,gKAAK,CAAC,KAAK,CAAC,KAAK,UAAU,MAAM,WAAW;QAC9C;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BAEb,8OAAC;gBAAM,WAAU;0BACf,cAAA,8OAAC;oBAAI,KAAK,GAAG,KAAK;oBAAE,WAAU;oBAAe,KAAI;;;;;;;;;;;0BAInD,8OAAC;gBAAK,WAAU;0BACd,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAG,WAAU;sCAAa;;;;;;sCAC3B,8OAAC;4BAAE,WAAU;sCAAW;;;;;;sCAExB,8OAAC;4BAAK,UAAU;;8CAEd,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAM,WAAU;sDAAc;;;;;;sDAC/B,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDACC,WAAU;oDACV,MAAM,QAAQ,SAAS;oDACvB,OAAO;oDACP,UAAU,CAAC,IAAM,YAAY,EAAE,MAAM,CAAC,KAAK;oDAC3C,aAAY;;;;;;8DAEd,8OAAC;oDACC,WAAU;oDACV,SAAS,IAAM,SAAS,CAAC;8DAExB,sBAAQ,8OAAC;;;;6EAAc,8OAAC;;;;;;;;;;;;;;;;;;;;;;8CAM/B,8OAAC;oCAAI,WAAU;;sDACb,8OAAC;4CAAM,WAAU;sDAAc;;;;;;sDAC/B,8OAAC;4CAAI,WAAU;;8DACb,8OAAC;oDACC,WAAU;oDACV,MAAM,QAAQ,SAAS;oDACvB,OAAO;oDACP,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;oDAC1C,aAAY;;;;;;8DAEd,8OAAC;oDACC,WAAU;oDACV,SAAS,IAAM,SAAS,CAAC;8DAExB,sBAAQ,8OAAC;;;;6EAAc,8OAAC;;;;;;;;;;;;;;;;;;;;;;8CAM/B,8OAAC;oCAAI,WAAU;8CACb,cAAA,8OAAC;wCAAO,WAAU;wCAAoB,MAAK;kDACxC;;;;;;;;;;;8CAKL,8OAAC;oCAAI,WAAU;;wCACZ;wCAA4B;sDAC7B,8OAAC;4CAAE,MAAM,GAAG,KAAK;sDAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOlC"}}]
}