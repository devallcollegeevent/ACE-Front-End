{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/middleware.js"],"sourcesContent":["import { NextResponse } from \"next/server\";\r\n\r\nexport function middleware(req) {\r\n  const { pathname } = req.nextUrl;\r\n\r\n  const token = req.cookies.get(\"token\")?.value;\r\n  const role = req.cookies.get(\"role\")?.value;\r\n\r\n  // ----------------------------------\r\n  // PUBLIC ROUTES (NO AUTH REQUIRED)\r\n  // ----------------------------------\r\n  const publicRoutes = [\r\n    \"/\",\r\n    \"/home\",\r\n    \"/auth\",\r\n    \"/auth/login\",\r\n    \"/auth/signup\",\r\n    \"/auth/forgot-password\",\r\n    \"/auth/enter-code\",\r\n    \"/auth/reset-password\",\r\n    \"/auth/success\",\r\n    \"/auth/email-verify\",\r\n  ];\r\n\r\n  if (publicRoutes.some((route) => pathname.startsWith(route))) {\r\n    return NextResponse.next();\r\n  }\r\n\r\n  // ----------------------------------\r\n  // BLOCK UNAUTHENTICATED USERS\r\n  // ----------------------------------\r\n  if (!token) {\r\n    // Organizer area\r\n    if (pathname.startsWith(\"/organization\")) {\r\n      return NextResponse.redirect(\r\n        new URL(\"/auth/organization/login\", req.url)\r\n      );\r\n    }\r\n\r\n    // User area\r\n    if (pathname.startsWith(\"/dashboard\") || pathname.startsWith(\"/events\")) {\r\n      return NextResponse.redirect(\r\n        new URL(\"/auth/user/login\", req.url)\r\n      );\r\n    }\r\n  }\r\n\r\n  // ----------------------------------\r\n  // ROLE-BASED PROTECTION\r\n  // ----------------------------------\r\n\r\n  // Organizer trying to access user pages\r\n  if (role === \"organizer\" && pathname.startsWith(\"/dashboard\")) {\r\n    return NextResponse.redirect(\r\n      new URL(\"/organization/event-management/my-events\", req.url)\r\n    );\r\n  }\r\n\r\n  // User trying to access organizer pages\r\n  if (role === \"user\" && pathname.startsWith(\"/organization\")) {\r\n    return NextResponse.redirect(\r\n      new URL(\"/events/listing\", req.url)\r\n    );\r\n  }\r\n\r\n  return NextResponse.next();\r\n}\r\n\r\n// ----------------------------------\r\n// MATCH ROUTES\r\n// ----------------------------------\r\nexport const config = {\r\n  matcher: [\r\n    \"/dashboard/:path*\",\r\n    \"/organization/:path*\",\r\n    \"/events/:path*\",\r\n    \"/auth/:path*\",\r\n  ],\r\n};\r\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;;AAEO,SAAS,WAAW,GAAG;IAC5B,MAAM,EAAE,QAAQ,EAAE,GAAG,IAAI,OAAO;IAEhC,MAAM,QAAQ,IAAI,OAAO,CAAC,GAAG,CAAC,UAAU;IACxC,MAAM,OAAO,IAAI,OAAO,CAAC,GAAG,CAAC,SAAS;IAEtC,qCAAqC;IACrC,mCAAmC;IACnC,qCAAqC;IACrC,MAAM,eAAe;QACnB;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IAED,IAAI,aAAa,IAAI,CAAC,CAAC,QAAU,SAAS,UAAU,CAAC,SAAS;QAC5D,OAAO,gMAAY,CAAC,IAAI;IAC1B;IAEA,qCAAqC;IACrC,8BAA8B;IAC9B,qCAAqC;IACrC,IAAI,CAAC,OAAO;QACV,iBAAiB;QACjB,IAAI,SAAS,UAAU,CAAC,kBAAkB;YACxC,OAAO,gMAAY,CAAC,QAAQ,CAC1B,IAAI,IAAI,4BAA4B,IAAI,GAAG;QAE/C;QAEA,YAAY;QACZ,IAAI,SAAS,UAAU,CAAC,iBAAiB,SAAS,UAAU,CAAC,YAAY;YACvE,OAAO,gMAAY,CAAC,QAAQ,CAC1B,IAAI,IAAI,oBAAoB,IAAI,GAAG;QAEvC;IACF;IAEA,qCAAqC;IACrC,wBAAwB;IACxB,qCAAqC;IAErC,wCAAwC;IACxC,IAAI,SAAS,eAAe,SAAS,UAAU,CAAC,eAAe;QAC7D,OAAO,gMAAY,CAAC,QAAQ,CAC1B,IAAI,IAAI,4CAA4C,IAAI,GAAG;IAE/D;IAEA,wCAAwC;IACxC,IAAI,SAAS,UAAU,SAAS,UAAU,CAAC,kBAAkB;QAC3D,OAAO,gMAAY,CAAC,QAAQ,CAC1B,IAAI,IAAI,mBAAmB,IAAI,GAAG;IAEtC;IAEA,OAAO,gMAAY,CAAC,IAAI;AAC1B;AAKO,MAAM,SAAS;IACpB,SAAS;QACP;QACA;QACA;QACA;KACD;AACH"}}]
}