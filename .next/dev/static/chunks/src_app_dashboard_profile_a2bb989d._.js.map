{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":["turbopack:///[project]/src/app/dashboard/profile/Profile.module.css [app-client] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"btnRow\": \"Profile-module__rfW_xW__btnRow\",\n  \"cancelBtn\": \"Profile-module__rfW_xW__cancelBtn\",\n  \"changePassword\": \"Profile-module__rfW_xW__changePassword\",\n  \"editBox\": \"Profile-module__rfW_xW__editBox\",\n  \"editIcon\": \"Profile-module__rfW_xW__editIcon\",\n  \"eyeIcon\": \"Profile-module__rfW_xW__eyeIcon\",\n  \"inputWrapper\": \"Profile-module__rfW_xW__inputWrapper\",\n  \"left\": \"Profile-module__rfW_xW__left\",\n  \"otpBox\": \"Profile-module__rfW_xW__otpBox\",\n  \"otpInputs\": \"Profile-module__rfW_xW__otpInputs\",\n  \"passwordBox\": \"Profile-module__rfW_xW__passwordBox\",\n  \"profileWrapper\": \"Profile-module__rfW_xW__profileWrapper\",\n  \"resend\": \"Profile-module__rfW_xW__resend\",\n  \"saveBtn\": \"Profile-module__rfW_xW__saveBtn\",\n  \"successBox\": \"Profile-module__rfW_xW__successBox\",\n  \"uploadBox\": \"Profile-module__rfW_xW__uploadBox\",\n  \"viewBox\": \"Profile-module__rfW_xW__viewBox\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 26, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Downloads/ace-nextjs-full-project/src/app/dashboard/profile/page.js"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useRef, useState } from \"react\";\r\nimport styles from \"./Profile.module.css\";\r\nimport toast from \"react-hot-toast\";\r\nimport { FaEye, FaEyeSlash } from \"react-icons/fa\";\r\n\r\nimport {\r\n  getOrganizationProfileApi,\r\n  updateOrganizationProfileApi,\r\n  forgotApi,\r\n  verifyOtpApi,\r\n  resetPasswordApi,\r\n} from \"@/lib/apiClient\";\r\nimport { getUserData } from \"@/lib/auth\";\r\n\r\nexport default function ProfilePage() {\r\n  const [mode, setMode] = useState(\"view\"); // view | edit | otp | password | success\r\n  const [profile, setProfile] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const [form, setForm] = useState({\r\n    organizationName: \"\",\r\n    domainEmail: \"\",\r\n    image: null,\r\n  });\r\n\r\n  const [otp, setOtp] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [confirm, setConfirm] = useState(\"\");\r\n  const [show1, setShow1] = useState(false);\r\n  const [show2, setShow2] = useState(false);\r\n\r\n  const fileRef = useRef(null);\r\n\r\n  /* ================= FETCH PROFILE ================= */\r\n  useEffect(() => {\r\n    async function loadProfile() {\r\n      try {\r\n        const user = getUserData();\r\n        if (!user?.identity) return;\r\n\r\n        const res = await getOrganizationProfileApi(user.identity);\r\n        if (res?.status) {\r\n          setProfile(res.data);\r\n          setForm({\r\n            organizationName: res.data.organizationName || \"\",\r\n            domainEmail: res.data.domainEmail || \"\",\r\n            image: null,\r\n          });\r\n        }\r\n      } catch {\r\n        toast.error(\"Failed to load profile\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    }\r\n\r\n    loadProfile();\r\n  }, []);\r\n\r\n  /* ================= SAVE PROFILE ================= */\r\n  const saveProfile = async () => {\r\n    try {\r\n      const user = getUserData();\r\n      const payload = new FormData();\r\n      payload.append(\"organizationName\", form.organizationName);\r\n      payload.append(\"domainEmail\", form.domainEmail);\r\n      if (form.image) payload.append(\"image\", form.image);\r\n\r\n      const res = await updateOrganizationProfileApi(user.identity, payload);\r\n      if (res?.status) {\r\n        setProfile(res.data);\r\n        toast.success(\"Profile updated\");\r\n        setMode(\"view\");\r\n      }\r\n    } catch {\r\n      toast.error(\"Update failed\");\r\n    }\r\n  };\r\n\r\n  /* ================= PASSWORD FLOW ================= */\r\n  const sendOtp = async () => {\r\n    await forgotApi({ email: form.domainEmail });\r\n    toast.success(\"OTP sent\");\r\n    setMode(\"otp\");\r\n  };\r\n\r\n  const verifyOtp = async () => {\r\n    await verifyOtpApi({ email: form.domainEmail, otp });\r\n    toast.success(\"OTP verified\");\r\n    setMode(\"password\");\r\n  };\r\n\r\n  const resetPass = async () => {\r\n    if (password !== confirm)\r\n      return toast.error(\"Passwords not matching\");\r\n\r\n    await resetPasswordApi({\r\n      email: form.domainEmail,\r\n      password,\r\n    });\r\n\r\n    toast.success(\"Password updated\");\r\n    setMode(\"success\");\r\n  };\r\n\r\n  if (loading) return <p>Loading...</p>;\r\n  if (!profile) return <p>No profile</p>;\r\n\r\n  return (\r\n    <div className={styles.wrapper}>\r\n      {/* ================= VIEW ================= */}\r\n      {mode === \"view\" && (\r\n        <div className={styles.viewBox}>\r\n          <div>\r\n            <label>Full Name</label>\r\n            <p>{profile.organizationName}</p>\r\n          </div>\r\n\r\n          <div>\r\n            <label>Domain Email</label>\r\n            <p>{profile.domainEmail}</p>\r\n          </div>\r\n\r\n          <img\r\n            src=\"/images/Pen.png\"\r\n            className={styles.editIcon}\r\n            onClick={() => setMode(\"edit\")}\r\n          />\r\n        </div>\r\n      )}\r\n\r\n      {/* ================= EDIT ================= */}\r\n      {mode === \"edit\" && (\r\n        <div className={styles.editBox}>\r\n          <div className={styles.left}>\r\n            <label>Full Name</label>\r\n            <input\r\n              value={form.organizationName}\r\n              onChange={(e) =>\r\n                setForm({ ...form, organizationName: e.target.value })\r\n              }\r\n            />\r\n\r\n            <label>Domain Email</label>\r\n            <input\r\n              value={form.domainEmail}\r\n              onChange={(e) =>\r\n                setForm({ ...form, domainEmail: e.target.value })\r\n              }\r\n            />\r\n\r\n            <span className={styles.changePass} onClick={sendOtp}>\r\n              Change Password\r\n            </span>\r\n          </div>\r\n\r\n          <div>\r\n            <div\r\n              className={styles.uploadBox}\r\n              onClick={() => fileRef.current.click()}\r\n            >\r\n              <p>\r\n                {form.image\r\n                  ? form.image.name\r\n                  : \"Upload profile picture\"}\r\n              </p>\r\n            </div>\r\n\r\n            <input\r\n              ref={fileRef}\r\n              type=\"file\"\r\n              hidden\r\n              accept=\"image/*\"\r\n              onChange={(e) =>\r\n                setForm({ ...form, image: e.target.files[0] })\r\n              }\r\n            />\r\n\r\n            <div className={styles.btnRow}>\r\n              <button onClick={() => setMode(\"view\")}>Cancel</button>\r\n              <button onClick={saveProfile}>Save</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* ================= OTP ================= */}\r\n      {mode === \"otp\" && (\r\n        <div className={styles.centerBox}>\r\n          <h3>Enter OTP</h3>\r\n          <input\r\n            maxLength={4}\r\n            value={otp}\r\n            onChange={(e) => setOtp(e.target.value)}\r\n          />\r\n          <div className={styles.btnRow}>\r\n            <button onClick={() => setMode(\"edit\")}>Cancel</button>\r\n            <button onClick={verifyOtp}>Continue</button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* ================= PASSWORD ================= */}\r\n      {mode === \"password\" && (\r\n        <div className={styles.centerBox}>\r\n          <div className={styles.passWrap}>\r\n            <input\r\n              type={show1 ? \"text\" : \"password\"}\r\n              placeholder=\"New password\"\r\n              onChange={(e) => setPassword(e.target.value)}\r\n            />\r\n            <span onClick={() => setShow1(!show1)}>\r\n              {show1 ? <FaEyeSlash /> : <FaEye />}\r\n            </span>\r\n          </div>\r\n\r\n          <div className={styles.passWrap}>\r\n            <input\r\n              type={show2 ? \"text\" : \"password\"}\r\n              placeholder=\"Confirm password\"\r\n              onChange={(e) => setConfirm(e.target.value)}\r\n            />\r\n            <span onClick={() => setShow2(!show2)}>\r\n              {show2 ? <FaEyeSlash /> : <FaEye />}\r\n            </span>\r\n          </div>\r\n\r\n          <div className={styles.btnRow}>\r\n            <button onClick={() => setMode(\"edit\")}>Cancel</button>\r\n            <button onClick={resetPass}>Save</button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* ================= SUCCESS ================= */}\r\n      {mode === \"success\" && (\r\n        <div className={styles.success}>\r\n          Password Successfully Changed!!\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}