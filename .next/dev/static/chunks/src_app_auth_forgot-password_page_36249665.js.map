{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Admin/Downloads/ace-nextjs-full-project/src/app/auth/forgot-password/page.js"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState } from \"react\";\r\nimport { useRouter, useSearchParams } from \"next/navigation\";\r\nimport { toast } from \"react-hot-toast\";\r\n\r\n/* API */\r\nimport { forgotPasswordApi } from \"@/lib/api/auth.api\";\r\n\r\n/* AUTH */\r\nimport { saveEmail } from \"@/lib/auth\";\r\n\r\n/* VALIDATION */\r\nimport {\r\n  userForgotSchema,\r\n  organizerForgotSchema,\r\n} from \"@/components/validation\";\r\n\r\n/* CONSTANTS */\r\nimport {\r\n  BTN_OTP_SEND,\r\n  MSG_OTP_SEND_EMAIL,\r\n  MSG_OTP_SEND_EMAIL_ERROR,\r\n  SUB_TITLE_OTP_SEND,\r\n  TEXT_SIGNIN,\r\n  TITLE_ALREADY_HAVE_ACCOUNT,\r\n  ROLE_USER,\r\n  ROLE_ORGANIZER,\r\n} from \"@/const-value/config-message/page\";\r\n\r\nexport default function ForgotPasswordPage() {\r\n  const router = useRouter();\r\n  const params = useSearchParams();\r\n  const role = params.get(\"role\") || ROLE_USER;\r\n\r\n  const [email, setEmail] = useState(\"\");\r\n\r\n  /* ROLE BASED CONFIG */\r\n  const config = {\r\n    user: {\r\n      image: \"/images/auth-forgot.png\",\r\n      label: \"Email\",\r\n      login: \"/auth/user/login\",\r\n      redirect: \"/auth/verify?role=user\",\r\n      schema: userForgotSchema,\r\n      type: ROLE_USER,\r\n    },\r\n    organizer: {\r\n      image: \"/images/or_forgotpassword.png\",\r\n      label: \"Domain Mail ID\",\r\n      login: \"/auth/organization/login\",\r\n      redirect: \"/auth/verify?role=organizer\",\r\n      schema: organizerForgotSchema,\r\n      type: ROLE_ORGANIZER,\r\n    },\r\n  };\r\n\r\n  const ui = config[role];\r\n\r\n  async function onSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    /* VALIDATION */\r\n    try {\r\n      await ui.schema.validate({ email }, { abortEarly: false });\r\n    } catch (err) {\r\n      return toast.error(err.errors[0]);\r\n    }\r\n\r\n    try {\r\n      /* API CALL */\r\n      await forgotPasswordApi({\r\n        email,\r\n        type: ui.type, // ðŸ”¥ IMPORTANT\r\n      });\r\n\r\n      saveEmail(email);\r\n      toast.success(MSG_OTP_SEND_EMAIL);\r\n\r\n      router.push(ui.redirect);\r\n    } catch (err) {\r\n      toast.error(\r\n        err?.message || MSG_OTP_SEND_EMAIL_ERROR\r\n      );\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"org-shell\">\r\n      {/* LEFT IMAGE */}\r\n      <aside className=\"org-left\">\r\n        <img src={ui.image} className=\"org-left-img\" alt=\"Forgot Password\" />\r\n      </aside>\r\n\r\n      {/* RIGHT FORM */}\r\n      <main className=\"org-right\">\r\n        <div className=\"org-card\">\r\n          <h2 className=\"org-title\">Forgot Password</h2>\r\n          <p className=\"org-sub\">{SUB_TITLE_OTP_SEND}</p>\r\n\r\n          <form onSubmit={onSubmit}>\r\n            <label className=\"form-label\">{ui.label}</label>\r\n            <input\r\n              className=\"form-control\"\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n              placeholder={ui.label}\r\n            />\r\n\r\n            <div className=\"form-actions\">\r\n              <button type=\"submit\" className=\"btn-primary-ghost\">\r\n                {BTN_OTP_SEND}\r\n              </button>\r\n            </div>\r\n\r\n            <div className=\"org-foot\">\r\n              {TITLE_ALREADY_HAVE_ACCOUNT}{\" \"}\r\n              <a href={ui.login}>{TEXT_SIGNIN}</a>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;AAJA;;;;;;;;AA8Be,SAAS;;IACtB,MAAM,SAAS,IAAA,kJAAS;IACxB,MAAM,SAAS,IAAA,wJAAe;IAC9B,MAAM,OAAO,OAAO,GAAG,CAAC,WAAW;IAEnC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IAEnC,qBAAqB,GACrB,MAAM,SAAS;QACb,MAAM;YACJ,OAAO;YACP,OAAO;YACP,OAAO;YACP,UAAU;YACV,QAAQ;YACR,MAAM;QACR;QACA,WAAW;YACT,OAAO;YACP,OAAO;YACP,OAAO;YACP,UAAU;YACV,QAAQ;YACR,MAAM;QACR;IACF;IAEA,MAAM,KAAK,MAAM,CAAC,KAAK;IAEvB,eAAe,SAAS,CAAC;QACvB,EAAE,cAAc;QAEhB,cAAc,GACd,IAAI;YACF,MAAM,GAAG,MAAM,CAAC,QAAQ,CAAC;gBAAE;YAAM,GAAG;gBAAE,YAAY;YAAM;QAC1D,EAAE,OAAO,KAAK;YACZ,OAAO,mKAAK,CAAC,KAAK,CAAC,IAAI,MAAM,CAAC,EAAE;QAClC;QAEA,IAAI;YACF,YAAY,GACZ,MAAM,kBAAkB;gBACtB;gBACA,MAAM,GAAG,IAAI;YACf;YAEA,UAAU;YACV,mKAAK,CAAC,OAAO,CAAC;YAEd,OAAO,IAAI,CAAC,GAAG,QAAQ;QACzB,EAAE,OAAO,KAAK;YACZ,mKAAK,CAAC,KAAK,CACT,KAAK,WAAW;QAEpB;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BAEb,6LAAC;gBAAM,WAAU;0BACf,cAAA,6LAAC;oBAAI,KAAK,GAAG,KAAK;oBAAE,WAAU;oBAAe,KAAI;;;;;;;;;;;0BAInD,6LAAC;gBAAK,WAAU;0BACd,cAAA,6LAAC;oBAAI,WAAU;;sCACb,6LAAC;4BAAG,WAAU;sCAAY;;;;;;sCAC1B,6LAAC;4BAAE,WAAU;sCAAW;;;;;;sCAExB,6LAAC;4BAAK,UAAU;;8CACd,6LAAC;oCAAM,WAAU;8CAAc,GAAG,KAAK;;;;;;8CACvC,6LAAC;oCACC,WAAU;oCACV,OAAO;oCACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;oCACxC,aAAa,GAAG,KAAK;;;;;;8CAGvB,6LAAC;oCAAI,WAAU;8CACb,cAAA,6LAAC;wCAAO,MAAK;wCAAS,WAAU;kDAC7B;;;;;;;;;;;8CAIL,6LAAC;oCAAI,WAAU;;wCACZ;wCAA4B;sDAC7B,6LAAC;4CAAE,MAAM,GAAG,KAAK;sDAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAOlC;GA9FwB;;QACP,kJAAS;QACT,wJAAe;;;KAFR"}}]
}